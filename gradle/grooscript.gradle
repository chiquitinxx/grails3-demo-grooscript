grooscript {
    source = ['src/main/groovy/gs']
    destination = 'grails-app/assets/javascripts/generated'
    initialText = '//Grooscript converted file'
}

templates {
    templatesPath = 'grails-app/views/gtpl'
    templates = ['list-links.gml']
    destinationFile = 'grails-app/assets/javascripts/generated/Templates.js'
}

spy {
    files = ['grails-app/assets/stylesheets/application.css',
            'grails-app/views/reload/index.gsp']
    onChanges = { list ->
        springWebsocketTo 'http://localhost:8080/stomp' data 'reload' onChannel '/app/reload'
    }
}

bootRun.dependsOn 'convertThread', 'templatesThread', 'spyChanges'

compileGroovy.dependsOn 'convert', 'templatesJs'